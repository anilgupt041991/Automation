#Get Token for Vault Sa account 
export VAULT_ADDR='https://us-zsense.zscwp.io:8300' 
vault login -method=userpass \
    username=vault-sa-admin \
    password=****
#Get aws credentails in local
#Blow command will configure snapshot to be dump into s3 name you provide below
#Create Snapshot
curl \
    --header "X-Vault-Token: hvs.CAESICXnNyM9h449qXRboOMxwA4bJifp0cOABmngMiwd2ZTLGiIKHGh2cy5CQWxDY3JtWVVoOHpKNk9WQTJqdkwzUEoQhb8D" \
    --request POST \
    --data @backup.json \
    https://us-zsense.zscwp.io:8300/v1/sys/storage/raft/snapshot-auto/config/vault

#List snapshots
curl \
    --header "X-Vault-Token: hvs.CAESIHZaoep8LUuiEjubNZRFocUZVlz4P5Ef8oAPQK2o6Mj8GiIKHGh2cy5PN2gzTm95ZUJXVURHQXg3RjlwUmFTRW4Q8L4D" \
    --request LIST \
    https://us-zsense.zscwp.io:8300/v1/sys/storage/raft/snapshot-auto/config

#Read Snapshot
curl \
    --header "X-Vault-Token: hvs.CAESIJrU7qbOpIyXeEWuX469Yol9zmNCLlHPbXm77m1obgS9GiIKHGh2cy51b05xR004UzBlMHZON3ZPb1NWYmRtZTQQ7L4D" \
    https://us-zsense.zscwp.io:8300/v1/sys/storage/raft/snapshot-auto/config/vault-np

#Delete Snapshot

curl \
    --header "X-Vault-Token: hvs.CAESICXnNyM9h449qXRboOMxwA4bJifp0cOABmngMiwd2ZTLGiIKHGh2cy5CQWxDY3JtWVVoOHpKNk9WQTJqdkwzUEoQhb8D" \
    --request DELETE \
    https://us-zsense.zscwp.io:8300/v1/sys/storage/raft/snapshot-auto/config/vault-np
